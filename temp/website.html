<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Website Visualization</title>
    <!-- d3.js framework -->
    <script type="text/javascript" src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>

    <link rel="stylesheet" href="../stylesheet.css" media="screen" title="no title" charset="utf-8">
    <!-- ToolTipster.css -->
    <link rel="stylesheet" href="../tooltipster-master/dist/css/tooltipster.bundle.min.css">

    <style>
        .axis path,
        .axis line {
            fill: none;
            stroke: #000;
            shape-rendering: crispEdges;
        }

        .bar {
            fill: orange;
        }

        .solidArc:hover {
            fill: orangered ;
        }

        .solidArc {
            -moz-transition: all 0.3s;
            -o-transition: all 0.3s;
            -webkit-transition: all 0.3s;
            transition: all 0.3s;
        }

        .x.axis path {
            display: none;
        }

        .aster-score {
            line-height: 1;
            font-weight: bold;
            font-size: 500%;
        }

        .d3-tip {
            line-height: 1;
            font-weight: bold;
            padding: 12px;
            background: rgba(0, 0, 0, 0.8);
            color: #fff;
            border-radius: 2px;
        }

        /* Creates a small triangle extender for the tooltip */
        .d3-tip:after {
            box-sizing: border-box;
            display: inline;
            font-size: 10px;
            width: 100%;
            line-height: 1;
            color: rgba(0, 0, 0, 0.8);
            content: "\25BC";
            position: absolute;
            text-align: center;
        }

        /* Style northward tooltips differently */
        .d3-tip.n:after {
            margin: -1px 0 0 0;
            top: 100%;
            left: 0;
        }
    </style>

</head>
<body>

<button type="button" class="buttons_mini" onclick="window.location.href='../index.html'">Back</button>

<h1 id="title"></h1>

<h2 id="type_header"></h2>

<div id="ratingDiv">
    <h3 id="rating"></h3>
</div>

<button type="button" class="buttons" id="descrButton">Show Property Description</button>

<table id="minTable" class="tablesorter">
    <thead>
    <tr>
        <th style="width: 5em;">&nbsp;</th>
        <th>Property</th>
        <th>Type</th>
        <th>Guideline</th>
        <th>CV</th>
        <th>Cardinality</th>
        <th class="hide description">Description</th>

    </tr>
    </thead>
    <tbody id="minimum_table">

    </tbody>
</table>

<button type="button" class="buttons" id="optButton">Show Optional Properties</button>

<table class="hide tablesorter" id="optTable">
    <thead>
    <tr>
        <th style="width: 5em;">&nbsp;</th>
        <th>Property</th>
        <th>Type</th>
        <th>Guideline</th>
        <th>CV</th>
        <th>Cardinality</th>
        <th class="hide description">Description</th>
    </tr>
    </thead>
    <tbody id="optional_table">

    </tbody>
</table>

<br>

<div id="missingMin"></div>

<button type="button" class="buttons" id="recommButton">Missing Recommended</button>

<div id="missingRec" class="hide"></div>

<div id="testchart"></div>

<!-- jQuery -->
<script type="text/javascript" src="https://code.jquery.com/jquery-2.2.3.min.js"></script>
<!-- TableSorter.js -->
<script type="text/javascript" src="../tablesorter-master/jquery.tablesorter.js"></script>
<!-- ToolTipster.js -->
<script type="text/javascript" src="../tooltipster-master/dist/js/tooltipster.bundle.min.js"></script>

<script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>

<script type="text/javascript">

    var siteName = (window.location.hash).split("#")[1];
    var type = (window.location.hash).split("#")[2];

    document.getElementById("title").innerHTML = siteName.replace(/_/g, "/");
    document.getElementById("type_header").innerHTML = type + " type";

    var minBody = document.getElementById("minimum_table");
    var optBody = document.getElementById("optional_table");

    var minRate = 0;
    var recRate = 0;
    var optRate = 0;
    var minTot = 0;
    var recTot = 0;
    var optTot = 0;

    var okColor = "#6CC4A4";
    var noColor = "#E1514B";
    var warnColor = "#FEC574";

    var minColor = "rgba(11, 121, 75, .5)";
    var recColor = "rgba(144, 238, 144, .5)";
    var optColor = "rgba(224, 255, 255, .5)";

    var graphList = [];

    d3.json(siteName + "/tagsGuide.json", function (data) {
        d3.json(siteName + "/tagsFound.json", function(data2) {


            if (type == "Event") {

                for (var i in data["event_bioschemas"]) {
                    for (var j in data["event_bioschemas"][i]) {
                        var property = document.createTextNode(j);

                        var scoreGraph = 0,
                                weightGraph = 0.0,
                                colorGraph = "";
                        if (data2["organization_schema"][0][j] == undefined) {
                            scoreGraph = 0;
                        } else {
                            scoreGraph = data2["organization_schema"][0][j].length;
                        }

                        var stdType = data["event_bioschemas"][i][j][0];
                        var stdDescr = data["event_bioschemas"][i][j][1];
                        var stdCard = data["event_bioschemas"][i][j][2];
                        var stdGuide = data["event_bioschemas"][i][j][3];
                        var stdVocab;
                        if (data["event_bioschemas"][i][j][4] == "Yes") {
                            stdVocab = data["event_bioschemas"][i][j][4];
                        } else {
                            stdVocab = "No";
                        }
                        var actType = data["event_bioschemas"][i][j][5];
                        var actCard = data["event_bioschemas"][i][j][6];
                        var actVocab = data["event_bioschemas"][i][j][7];

                        var tick = document.createElement("img");
                        tick.src = "../img/tick_green.png";
                        tick.alt = 1;
                        tick.style.width = "35%";
                        tick.style.display = "block";
                        tick.style.marginLeft = "auto";
                        tick.style.marginRight = "auto";
                        var nope = document.createElement("img");
                        nope.src = "../img/cross-512.png";
                        nope.alt = 3;
                        nope.style.width = "30%";
                        nope.style.display = "block";
                        nope.style.marginLeft = "auto";
                        nope.style.marginRight = "auto";
                        var warn = document.createElement("img");
                        warn.src = "../img/warning.png";
                        warn.alt = 2;
                        warn.style.width = "35%";
                        warn.style.display = "block";
                        warn.style.marginLeft = "auto";
                        warn.style.marginRight = "auto";

                        if (stdGuide == "Minimum") {

                            weightGraph = 0.6;

                            var row = minBody.insertRow(0);
                            minTot++;
                            if (actType == "OK" && actCard == "OK" && actVocab == "OK") {
                                colorGraph = okColor;

                                row.insertCell(0).appendChild(tick);
                                minRate++;
                            } else if (actType == "Not found" && actCard == "Not found" && actVocab == "Not found") {
                                colorGraph = noColor;

                                row.insertCell(0).appendChild(nope);
                                var missDiv = document.getElementById("missingMin");
                                var newp = document.createElement("p");
                                newp.innerHTML = "Missing minimum property " + j;
                                missDiv.appendChild(newp);
                            } else {

                                colorGraph = warnColor;

                                if (actType == "OK" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "OK") {
                                    warn.title = "Wrong type";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "Wrong") {
                                    warn.title = "Wrong cardinality and controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong type and cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong type and controlled vocabulary";
                                    warn.className = "tooltip";
                                }

                                row.insertCell(0).appendChild(warn);
                                minRate++;
                            }
                            row.insertCell(1).appendChild(property);
                            var tabType = document.createTextNode(stdType);
                            var tabGuide = document.createTextNode(stdGuide);
                            var tabVocab = document.createTextNode(stdVocab);
                            var tabCard = document.createTextNode(stdCard);
                            var tabDescr = document.createTextNode(stdDescr);
                            row.insertCell(2).appendChild(tabType);
                            var guideCell = row.insertCell(3);
                            guideCell.style.backgroundColor = minColor;
                            guideCell.appendChild(tabGuide);
                            row.insertCell(4).appendChild(tabVocab);
                            row.insertCell(5).appendChild(tabCard);
                            var descrCell = row.insertCell(6);
                            descrCell.className = "hide description";
                            descrCell.appendChild(tabDescr);

                        } else if (stdGuide == "Recommended") {

                            weightGraph = 0.35;

                            var row = minBody.insertRow(0);
                            recTot++;
                            if (actType == "OK" && actCard == "OK" && actVocab == "OK") {
                                colorGraph = okColor;

                                row.insertCell(0).appendChild(tick);
                                recRate++;
                            } else if (actType == "Not found" && actCard == "Not found" && actVocab == "Not found") {
                                colorGraph = noColor;

                                row.insertCell(0).appendChild(nope);
                                var missDiv = document.getElementById("missingRec");
                                var newp = document.createElement("p");
                                newp.innerHTML = "Missing recommended property " + j;
                                missDiv.appendChild(newp);
                            } else {

                                colorGraph = warnColor;

                                if (actType == "OK" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "OK") {
                                    warn.title = "Wrong type";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "Wrong") {
                                    warn.title = "Wrong cardinality and controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong type and cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong type and controlled vocabulary";
                                    warn.className = "tooltip";
                                }

                                row.insertCell(0).appendChild(warn);
                                recRate++;
                            }
                            row.insertCell(1).appendChild(property);
                            var tabType = document.createTextNode(stdType);
                            var tabGuide = document.createTextNode(stdGuide);
                            var tabVocab = document.createTextNode(stdVocab);
                            var tabCard = document.createTextNode(stdCard);
                            var tabDescr = document.createTextNode(stdDescr);
                            row.insertCell(2).appendChild(tabType);
                            var guideCell = row.insertCell(3);
                            guideCell.style.backgroundColor = recColor;
                            guideCell.appendChild(tabGuide);
                            row.insertCell(4).appendChild(tabVocab);
                            row.insertCell(5).appendChild(tabCard);
                            var descrCell = row.insertCell(6);
                            descrCell.className = "hide description";
                            descrCell.appendChild(tabDescr);

                        } else {

                            weightGraph = 0.05;

                            var row = optBody.insertRow(0);
                            optTot++;
                            if (actType == "OK" && actCard == "OK" && actVocab == "OK") {
                                colorGraph = okColor;

                                row.insertCell(0).appendChild(tick);
                                optRate++;
                            } else if (actType == "Not found" && actCard == "Not found" && actVocab == "Not found") {
                                colorGraph = noColor;

                                row.insertCell(0).appendChild(nope);
                            } else {

                                colorGraph = warnColor;

                                if (actType == "OK" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "OK") {
                                    warn.title = "Wrong type";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "Wrong") {
                                    warn.title = "Wrong cardinality and controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong type and cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong type and controlled vocabulary";
                                    warn.className = "tooltip";
                                }

                                row.insertCell(0).appendChild(warn);
                                optRate++;
                            }
                            row.insertCell(1).appendChild(property);
                            var tabType = document.createTextNode(stdType);
                            var tabGuide = document.createTextNode(stdGuide);
                            var tabVocab = document.createTextNode(stdVocab);
                            var tabCard = document.createTextNode(stdCard);
                            var tabDescr = document.createTextNode(stdDescr);
                            row.insertCell(2).appendChild(tabType);
                            var guideCell = row.insertCell(3);
                            guideCell.style.backgroundColor = optColor;
                            guideCell.appendChild(tabGuide);
                            row.insertCell(4).appendChild(tabVocab);
                            row.insertCell(5).appendChild(tabCard);
                            var descrCell = row.insertCell(6);
                            descrCell.className = "hide description";
                            descrCell.appendChild(tabDescr);
                        }
                        graphList.push({"label": j, "score": scoreGraph, "weight": weightGraph, "color": colorGraph});
                    }
                }

                for (var i in data["event_schema"]) {
                    for (var j in data["event_schema"][i]) {
                        var property = document.createElement("a");
                        property.setAttribute("href", "https://schema.org/" + j);
                        property.innerHTML = j;

                        var scoreGraph = 0,
                                weightGraph = 0.0,
                                colorGraph = "";
                        if (data2["organization_schema"][0][j] == undefined) {
                            scoreGraph = 0;
                        } else {
                            scoreGraph = data2["organization_schema"][0][j].length;
                        }

                        var stdType = data["event_schema"][i][j][0];
                        var stdDescr = data["event_schema"][i][j][1];
                        var stdCard = data["event_schema"][i][j][2];
                        var stdGuide = data["event_schema"][i][j][3];
                        var stdVocab;
                        if (data["event_schema"][i][j][4] == "Yes") {
                            stdVocab = data["event_schema"][i][j][4];
                        } else {
                            stdVocab = "No";
                        }
                        var actType = data["event_schema"][i][j][5];
                        var actCard = data["event_schema"][i][j][6];
                        var actVocab = data["event_schema"][i][j][7];

                        var tick = document.createElement("img");
                        tick.src = "../img/tick_green.png";
                        tick.alt = 1;
                        tick.style.width = "35%";
                        tick.style.display = "block";
                        tick.style.marginLeft = "auto";
                        tick.style.marginRight = "auto";
                        var nope = document.createElement("img");
                        nope.src = "../img/cross-512.png";
                        nope.alt = 3;
                        nope.style.width = "30%";
                        nope.style.display = "block";
                        nope.style.marginLeft = "auto";
                        nope.style.marginRight = "auto";
                        var warn = document.createElement("img");
                        warn.src = "../img/warning.png";
                        warn.alt = 2;
                        warn.style.width = "35%";
                        warn.style.display = "block";
                        warn.style.marginLeft = "auto";
                        warn.style.marginRight = "auto";

                        if (stdGuide == "Minimum") {

                            weightGraph = 0.6;

                            var row = minBody.insertRow(0);
                            minTot++;
                            if (actType == "OK" && actCard == "OK" && actVocab == "OK") {
                                colorGraph = okColor;

                                row.insertCell(0).appendChild(tick);
                                minRate++;
                            } else if (actType == "Not found" && actCard == "Not found" && actVocab == "Not found") {
                                colorGraph = noColor;

                                row.insertCell(0).appendChild(nope);
                                var missDiv = document.getElementById("missingMin");
                                var newp = document.createElement("p");
                                newp.innerHTML = "Missing minimum property " + j;
                                missDiv.appendChild(newp);
                            } else {

                                colorGraph = warnColor;

                                if (actType == "OK" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "OK") {
                                    warn.title = "Wrong type";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "Wrong") {
                                    warn.title = "Wrong cardinality and controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong type and cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong type and controlled vocabulary";
                                    warn.className = "tooltip";
                                }

                                row.insertCell(0).appendChild(warn);
                                minRate++;
                            }
                            row.insertCell(1).appendChild(property);
                            var tabType = document.createTextNode(stdType);
                            var tabGuide = document.createTextNode(stdGuide);
                            var tabVocab = document.createTextNode(stdVocab);
                            var tabCard = document.createTextNode(stdCard);
                            var tabDescr = document.createTextNode(stdDescr);
                            row.insertCell(2).appendChild(tabType);
                            var guideCell = row.insertCell(3);
                            guideCell.style.backgroundColor = minColor;
                            guideCell.appendChild(tabGuide);
                            row.insertCell(4).appendChild(tabVocab);
                            row.insertCell(5).appendChild(tabCard);
                            var descrCell = row.insertCell(6);
                            descrCell.className = "hide description";
                            descrCell.appendChild(tabDescr);

                        } else if (stdGuide == "Recommended") {

                            weightGraph = 0.35;

                            var row = minBody.insertRow(0);
                            recTot++;
                            if (actType == "OK" && actCard == "OK" && actVocab == "OK") {
                                colorGraph = okColor;

                                row.insertCell(0).appendChild(tick);
                                recRate++;
                            } else if (actType == "Not found" && actCard == "Not found" && actVocab == "Not found") {
                                colorGraph = noColor;

                                row.insertCell(0).appendChild(nope);
                                var missDiv = document.getElementById("missingRec");
                                var newp = document.createElement("p");
                                newp.innerHTML = "Missing recommended property " + j;
                                missDiv.appendChild(newp);
                            } else {

                                colorGraph = warnColor;

                                if (actType == "OK" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "OK") {
                                    warn.title = "Wrong type";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "Wrong") {
                                    warn.title = "Wrong cardinality and controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong type and cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong type and controlled vocabulary";
                                    warn.className = "tooltip";
                                }

                                row.insertCell(0).appendChild(warn);
                                recRate++;
                            }
                            row.insertCell(1).appendChild(property);
                            var tabType = document.createTextNode(stdType);
                            var tabGuide = document.createTextNode(stdGuide);
                            var tabVocab = document.createTextNode(stdVocab);
                            var tabCard = document.createTextNode(stdCard);
                            var tabDescr = document.createTextNode(stdDescr);
                            row.insertCell(2).appendChild(tabType);
                            var guideCell = row.insertCell(3);
                            guideCell.style.backgroundColor = recColor;
                            guideCell.appendChild(tabGuide);
                            row.insertCell(4).appendChild(tabVocab);
                            row.insertCell(5).appendChild(tabCard);
                            var descrCell = row.insertCell(6);
                            descrCell.className = "hide description";
                            descrCell.appendChild(tabDescr);

                        } else {

                            weightGraph = 0.05;

                            var row = optBody.insertRow(0);
                            optTot++;
                            if (actType == "OK" && actCard == "OK" && actVocab == "OK") {
                                colorGraph = okColor;

                                row.insertCell(0).appendChild(tick);
                                optRate++;
                            } else if (actType == "Not found" && actCard == "Not found" && actVocab == "Not found") {
                                colorGraph = noColor;

                                row.insertCell(0).appendChild(nope);
                            } else {

                                colorGraph = warnColor;

                                if (actType == "OK" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "OK") {
                                    warn.title = "Wrong type";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "Wrong") {
                                    warn.title = "Wrong cardinality and controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong type and cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong type and controlled vocabulary";
                                    warn.className = "tooltip";
                                }

                                row.insertCell(0).appendChild(warn);
                                optRate++;
                            }
                            row.insertCell(1).appendChild(property);
                            var tabType = document.createTextNode(stdType);
                            var tabGuide = document.createTextNode(stdGuide);
                            var tabVocab = document.createTextNode(stdVocab);
                            var tabCard = document.createTextNode(stdCard);
                            var tabDescr = document.createTextNode(stdDescr);
                            row.insertCell(2).appendChild(tabType);
                            var guideCell = row.insertCell(3);
                            guideCell.style.backgroundColor = optColor;
                            guideCell.appendChild(tabGuide);
                            row.insertCell(4).appendChild(tabVocab);
                            row.insertCell(5).appendChild(tabCard);
                            var descrCell = row.insertCell(6);
                            descrCell.className = "hide description";
                            descrCell.appendChild(tabDescr);
                        }
                        graphList.push({"label": j, "score": scoreGraph, "weight": weightGraph, "color": colorGraph});
                    }
                }
            } else if (type == "Organization") {
                for (var i in data["organization_bioschemas"]) {
                    for (var j in data["organization_bioschemas"][i]) {
                        var property = document.createTextNode(j);

                        var scoreGraph = 0,
                                weightGraph = 0.0,
                                colorGraph = "";
                        if (data2["organization_schema"][0][j] == undefined) {
                            scoreGraph = 0;
                        } else {
                            scoreGraph = data2["organization_schema"][0][j].length;
                        }

                        var stdType = data["organization_bioschemas"][i][j][0];
                        var stdDescr = data["organization_bioschemas"][i][j][1];
                        var stdCard = data["organization_bioschemas"][i][j][2];
                        var stdGuide = data["organization_bioschemas"][i][j][3];
                        var stdVocab;
                        if (data["organization_bioschemas"][i][j][4] == "Yes") {
                            stdVocab = data["organization_bioschemas"][i][j][4];
                        } else {
                            stdVocab = "No";
                        }
                        var actType = data["organization_bioschemas"][i][j][5];
                        var actCard = data["organization_bioschemas"][i][j][6];
                        var actVocab = data["organization_bioschemas"][i][j][7];

                        var tick = document.createElement("img");
                        tick.src = "../img/tick_green.png";
                        tick.alt = 1;
                        tick.style.width = "35%";
                        tick.style.display = "block";
                        tick.style.marginLeft = "auto";
                        tick.style.marginRight = "auto";
                        var nope = document.createElement("img");
                        nope.src = "../img/cross-512.png";
                        nope.alt = 3;
                        nope.style.width = "30%";
                        nope.style.display = "block";
                        nope.style.marginLeft = "auto";
                        nope.style.marginRight = "auto";
                        var warn = document.createElement("img");
                        warn.src = "../img/warning.png";
                        warn.alt = 2;
                        warn.style.width = "35%";
                        warn.style.display = "block";
                        warn.style.marginLeft = "auto";
                        warn.style.marginRight = "auto";

                        if (stdGuide == "Minimum") {

                            weightGraph = 0.6;

                            var row = minBody.insertRow(0);
                            minTot++;
                            if (actType == "OK" && actCard == "OK" && actVocab == "OK") {
                                colorGraph = okColor;

                                row.insertCell(0).appendChild(tick);
                                minRate++;
                            } else if (actType == "Not found" && actCard == "Not found" && actVocab == "Not found") {
                                colorGraph = noColor;

                                row.insertCell(0).appendChild(nope);
                                var missDiv = document.getElementById("missingMin");
                                var newp = document.createElement("p");
                                newp.innerHTML = "Missing minimum property " + j;
                                missDiv.appendChild(newp);
                            } else {

                                colorGraph = warnColor;

                                if (actType == "OK" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "OK") {
                                    warn.title = "Wrong type";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "Wrong") {
                                    warn.title = "Wrong cardinality and controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong type and cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong type and controlled vocabulary";
                                    warn.className = "tooltip";
                                }

                                row.insertCell(0).appendChild(warn);
                                minRate++;
                            }
                            row.insertCell(1).appendChild(property);
                            var tabType = document.createTextNode(stdType);
                            var tabGuide = document.createTextNode(stdGuide);
                            var tabVocab = document.createTextNode(stdVocab);
                            var tabCard = document.createTextNode(stdCard);
                            var tabDescr = document.createTextNode(stdDescr);
                            row.insertCell(2).appendChild(tabType);
                            var guideCell = row.insertCell(3);
                            guideCell.style.backgroundColor = minColor;
                            guideCell.appendChild(tabGuide);
                            row.insertCell(4).appendChild(tabVocab);
                            row.insertCell(5).appendChild(tabCard);
                            var descrCell = row.insertCell(6);
                            descrCell.className = "hide description";
                            descrCell.appendChild(tabDescr);

                        } else if (stdGuide == "Recommended") {

                            weightGraph = 0.35;

                            var row = minBody.insertRow(0);
                            recTot++;
                            if (actType == "OK" && actCard == "OK" && actVocab == "OK") {
                                colorGraph = okColor;

                                row.insertCell(0).appendChild(tick);
                                recRate++;
                            } else if (actType == "Not found" && actCard == "Not found" && actVocab == "Not found") {
                                colorGraph = noColor;

                                row.insertCell(0).appendChild(nope);
                                var missDiv = document.getElementById("missingRec");
                                var newp = document.createElement("p");
                                newp.innerHTML = "Missing recommended property " + j;
                                missDiv.appendChild(newp);
                            } else {

                                colorGraph = warnColor;

                                if (actType == "OK" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "OK") {
                                    warn.title = "Wrong type";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "Wrong") {
                                    warn.title = "Wrong cardinality and controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong type and cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong type and controlled vocabulary";
                                    warn.className = "tooltip";
                                }

                                row.insertCell(0).appendChild(warn);
                                recRate++;
                            }
                            row.insertCell(1).appendChild(property);
                            var tabType = document.createTextNode(stdType);
                            var tabGuide = document.createTextNode(stdGuide);
                            var tabVocab = document.createTextNode(stdVocab);
                            var tabCard = document.createTextNode(stdCard);
                            var tabDescr = document.createTextNode(stdDescr);
                            row.insertCell(2).appendChild(tabType);
                            var guideCell = row.insertCell(3);
                            guideCell.style.backgroundColor = recColor;
                            guideCell.appendChild(tabGuide);
                            row.insertCell(4).appendChild(tabVocab);
                            row.insertCell(5).appendChild(tabCard);
                            var descrCell = row.insertCell(6);
                            descrCell.className = "hide description";
                            descrCell.appendChild(tabDescr);

                        } else {

                            weightGraph = 0.05;

                            var row = optBody.insertRow(0);
                            optTot++;
                            if (actType == "OK" && actCard == "OK" && actVocab == "OK") {
                                colorGraph = okColor;

                                row.insertCell(0).appendChild(tick);
                                optRate++;
                            } else if (actType == "Not found" && actCard == "Not found" && actVocab == "Not found") {
                                colorGraph = noColor;

                                row.insertCell(0).appendChild(nope);
                            } else {

                                colorGraph = warnColor;

                                if (actType == "OK" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "OK") {
                                    warn.title = "Wrong type";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "Wrong") {
                                    warn.title = "Wrong cardinality and controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong type and cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong type and controlled vocabulary";
                                    warn.className = "tooltip";
                                }

                                row.insertCell(0).appendChild(warn);
                                optRate++;
                            }
                            row.insertCell(1).appendChild(property);
                            var tabType = document.createTextNode(stdType);
                            var tabGuide = document.createTextNode(stdGuide);
                            var tabVocab = document.createTextNode(stdVocab);
                            var tabCard = document.createTextNode(stdCard);
                            var tabDescr = document.createTextNode(stdDescr);
                            row.insertCell(2).appendChild(tabType);
                            var guideCell = row.insertCell(3);
                            guideCell.style.backgroundColor = optColor;
                            guideCell.appendChild(tabGuide);
                            row.insertCell(4).appendChild(tabVocab);
                            row.insertCell(5).appendChild(tabCard);
                            var descrCell = row.insertCell(6);
                            descrCell.className = "hide description";
                            descrCell.appendChild(tabDescr);
                        }
                        graphList.push({"label": j, "score": scoreGraph, "weight": weightGraph, "color": colorGraph});
                    }
                }

                for (var i in data["organization_schema"]) {
                    for (var j in data["organization_schema"][i]) {
                        var property = document.createElement("a");
                        property.setAttribute("href", "https://schema.org/" + j);
                        property.innerHTML = j;

                        var scoreGraph = 0,
                                weightGraph = 0.0,
                                colorGraph = "";
                        if (data2["organization_schema"][0][j] == undefined) {
                            scoreGraph = 0;
                        } else {
                            scoreGraph = data2["organization_schema"][0][j].length;
                        }

                        var stdType = data["organization_schema"][i][j][0];
                        var stdDescr = data["organization_schema"][i][j][1];
                        var stdCard = data["organization_schema"][i][j][2];
                        var stdGuide = data["organization_schema"][i][j][3];
                        var stdVocab;
                        if (data["organization_schema"][i][j][4] == "Yes") {
                            stdVocab = data["organization_schema"][i][j][4];
                        } else {
                            stdVocab = "No";
                        }
                        var actType = data["organization_schema"][i][j][5];
                        var actCard = data["organization_schema"][i][j][6];
                        var actVocab = data["organization_schema"][i][j][7];

                        var tick = document.createElement("img");
                        tick.src = "../img/tick_green.png";
                        tick.alt = 1;
                        tick.style.width = "35%";
                        tick.style.display = "block";
                        tick.style.marginLeft = "auto";
                        tick.style.marginRight = "auto";
                        var nope = document.createElement("img");
                        nope.src = "../img/cross-512.png";
                        nope.alt = 3;
                        nope.style.width = "30%";
                        nope.style.display = "block";
                        nope.style.marginLeft = "auto";
                        nope.style.marginRight = "auto";
                        var warn = document.createElement("img");
                        warn.src = "../img/warning.png";
                        warn.alt = 2;
                        warn.style.width = "35%";
                        warn.style.display = "block";
                        warn.style.marginLeft = "auto";
                        warn.style.marginRight = "auto";

                        if (stdGuide == "Minimum") {

                            weightGraph = 0.6;

                            var row = minBody.insertRow(0);
                            minTot++;
                            if (actType == "OK" && actCard == "OK" && actVocab == "OK") {
                                colorGraph = okColor;

                                row.insertCell(0).appendChild(tick);
                                minRate++;
                            } else if (actType == "Not found" && actCard == "Not found" && actVocab == "Not found") {
                                colorGraph = noColor;

                                row.insertCell(0).appendChild(nope);
                                var missDiv = document.getElementById("missingMin");
                                var newp = document.createElement("p");
                                newp.innerHTML = "Missing minimum property " + j;
                                missDiv.appendChild(newp);
                            } else {

                                colorGraph = warnColor;

                                if (actType == "OK" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "OK") {
                                    warn.title = "Wrong type";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "Wrong") {
                                    warn.title = "Wrong cardinality and controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong type and cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong type and controlled vocabulary";
                                    warn.className = "tooltip";
                                }

                                row.insertCell(0).appendChild(warn);
                                minRate++;
                            }
                            row.insertCell(1).appendChild(property);
                            var tabType = document.createTextNode(stdType);
                            var tabGuide = document.createTextNode(stdGuide);
                            var tabVocab = document.createTextNode(stdVocab);
                            var tabCard = document.createTextNode(stdCard);
                            var tabDescr = document.createTextNode(stdDescr);
                            row.insertCell(2).appendChild(tabType);
                            var guideCell = row.insertCell(3);
                            guideCell.style.backgroundColor = minColor;
                            guideCell.appendChild(tabGuide);
                            row.insertCell(4).appendChild(tabVocab);
                            row.insertCell(5).appendChild(tabCard);
                            var descrCell = row.insertCell(6);
                            descrCell.className = "hide description";
                            descrCell.appendChild(tabDescr);

                        } else if (stdGuide == "Recommended") {

                            weightGraph = 0.35;

                            var row = minBody.insertRow(0);
                            recTot++;
                            if (actType == "OK" && actCard == "OK" && actVocab == "OK") {
                                colorGraph = okColor;

                                row.insertCell(0).appendChild(tick);
                                recRate++;
                            } else if (actType == "Not found" && actCard == "Not found" && actVocab == "Not found") {
                                colorGraph = noColor;

                                row.insertCell(0).appendChild(nope);
                                var missDiv = document.getElementById("missingRec");
                                var newp = document.createElement("p");
                                newp.innerHTML = "Missing recommended property " + j;
                                missDiv.appendChild(newp);
                            } else {

                                colorGraph = warnColor;

                                if (actType == "OK" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "OK") {
                                    warn.title = "Wrong type";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "Wrong") {
                                    warn.title = "Wrong cardinality and controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong type and cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong type and controlled vocabulary";
                                    warn.className = "tooltip";
                                }

                                row.insertCell(0).appendChild(warn);
                                recRate++;
                            }
                            row.insertCell(1).appendChild(property);
                            var tabType = document.createTextNode(stdType);
                            var tabGuide = document.createTextNode(stdGuide);
                            var tabVocab = document.createTextNode(stdVocab);
                            var tabCard = document.createTextNode(stdCard);
                            var tabDescr = document.createTextNode(stdDescr);
                            row.insertCell(2).appendChild(tabType);
                            var guideCell = row.insertCell(3);
                            guideCell.style.backgroundColor = recColor;
                            guideCell.appendChild(tabGuide);
                            row.insertCell(4).appendChild(tabVocab);
                            row.insertCell(5).appendChild(tabCard);
                            var descrCell = row.insertCell(6);
                            descrCell.className = "hide description";
                            descrCell.appendChild(tabDescr);

                        } else {

                            weightGraph = 0.05;

                            var row = optBody.insertRow(0);
                            optTot++;
                            if (actType == "OK" && actCard == "OK" && actVocab == "OK") {
                                colorGraph = okColor;

                                row.insertCell(0).appendChild(tick);
                                optRate++;
                            } else if (actType == "Not found" && actCard == "Not found" && actVocab == "Not found") {
                                colorGraph = noColor;

                                row.insertCell(0).appendChild(nope);
                            } else {

                                colorGraph = warnColor;

                                if (actType == "OK" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "OK") {
                                    warn.title = "Wrong type";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "Wrong") {
                                    warn.title = "Wrong cardinality and controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong type and cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong type and controlled vocabulary";
                                    warn.className = "tooltip";
                                }

                                row.insertCell(0).appendChild(warn);
                                optRate++;
                            }
                            row.insertCell(1).appendChild(property);
                            var tabType = document.createTextNode(stdType);
                            var tabGuide = document.createTextNode(stdGuide);
                            var tabVocab = document.createTextNode(stdVocab);
                            var tabCard = document.createTextNode(stdCard);
                            var tabDescr = document.createTextNode(stdDescr);
                            row.insertCell(2).appendChild(tabType);
                            var guideCell = row.insertCell(3);
                            guideCell.style.backgroundColor = optColor;
                            guideCell.appendChild(tabGuide);
                            row.insertCell(4).appendChild(tabVocab);
                            row.insertCell(5).appendChild(tabCard);
                            var descrCell = row.insertCell(6);
                            descrCell.className = "hide description";
                            descrCell.appendChild(tabDescr);
                        }
                        graphList.push({"label": j, "score": scoreGraph, "weight": weightGraph, "color": colorGraph});
                    }
                }
            } else if (type == "Person") {
                for (var i in data["person_bioschemas"]) {
                    for (var j in data["person_bioschemas"][i]) {
                        var property = document.createTextNode(j);

                        var scoreGraph = 0,
                                weightGraph = 0.0,
                                colorGraph = "";
                        if (data2["organization_schema"][0][j] == undefined) {
                            scoreGraph = 0;
                        } else {
                            scoreGraph = data2["organization_schema"][0][j].length;
                        }

                        var stdType = data["person_bioschemas"][i][j][0];
                        var stdDescr = data["person_bioschemas"][i][j][1];
                        var stdCard = data["person_bioschemas"][i][j][2];
                        var stdGuide = data["person_bioschemas"][i][j][3];
                        var stdVocab;
                        if (data["person_bioschemas"][i][j][4] == "Yes") {
                            stdVocab = data["person_bioschemas"][i][j][4];
                        } else {
                            stdVocab = "No";
                        }
                        var actType = data["person_bioschemas"][i][j][5];
                        var actCard = data["person_bioschemas"][i][j][6];
                        var actVocab = data["person_bioschemas"][i][j][7];

                        var tick = document.createElement("img");
                        tick.src = "../img/tick_green.png";
                        tick.alt = 1;
                        tick.style.width = "35%";
                        tick.style.display = "block";
                        tick.style.marginLeft = "auto";
                        tick.style.marginRight = "auto";
                        var nope = document.createElement("img");
                        nope.src = "../img/cross-512.png";
                        nope.alt = 3;
                        nope.style.width = "30%";
                        nope.style.display = "block";
                        nope.style.marginLeft = "auto";
                        nope.style.marginRight = "auto";
                        var warn = document.createElement("img");
                        warn.src = "../img/warning.png";
                        warn.alt = 2;
                        warn.style.width = "35%";
                        warn.style.display = "block";
                        warn.style.marginLeft = "auto";
                        warn.style.marginRight = "auto";

                        if (stdGuide == "Minimum") {

                            weightGraph = 0.6;

                            var row = minBody.insertRow(0);
                            minTot++;
                            if (actType == "OK" && actCard == "OK" && actVocab == "OK") {
                                colorGraph = okColor;

                                row.insertCell(0).appendChild(tick);
                                minRate++;
                            } else if (actType == "Not found" && actCard == "Not found" && actVocab == "Not found") {
                                colorGraph = noColor;

                                row.insertCell(0).appendChild(nope);
                                var missDiv = document.getElementById("missingMin");
                                var newp = document.createElement("p");
                                newp.innerHTML = "Missing minimum property " + j;
                                missDiv.appendChild(newp);
                            } else {

                                colorGraph = warnColor;

                                if (actType == "OK" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "OK") {
                                    warn.title = "Wrong type";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "Wrong") {
                                    warn.title = "Wrong cardinality and controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong type and cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong type and controlled vocabulary";
                                    warn.className = "tooltip";
                                }

                                row.insertCell(0).appendChild(warn);
                                minRate++;
                            }
                            row.insertCell(1).appendChild(property);
                            var tabType = document.createTextNode(stdType);
                            var tabGuide = document.createTextNode(stdGuide);
                            var tabVocab = document.createTextNode(stdVocab);
                            var tabCard = document.createTextNode(stdCard);
                            var tabDescr = document.createTextNode(stdDescr);
                            row.insertCell(2).appendChild(tabType);
                            var guideCell = row.insertCell(3);
                            guideCell.style.backgroundColor = minColor;
                            guideCell.appendChild(tabGuide);
                            row.insertCell(4).appendChild(tabVocab);
                            row.insertCell(5).appendChild(tabCard);
                            var descrCell = row.insertCell(6);
                            descrCell.className = "hide description";
                            descrCell.appendChild(tabDescr);

                        } else if (stdGuide == "Recommended") {

                            weightGraph = 0.35;

                            var row = minBody.insertRow(0);
                            recTot++;
                            if (actType == "OK" && actCard == "OK" && actVocab == "OK") {
                                colorGraph = okColor;

                                row.insertCell(0).appendChild(tick);
                                recRate++;
                            } else if (actType == "Not found" && actCard == "Not found" && actVocab == "Not found") {
                                colorGraph = noColor;

                                row.insertCell(0).appendChild(nope);
                                var missDiv = document.getElementById("missingRec");
                                var newp = document.createElement("p");
                                newp.innerHTML = "Missing recommended property " + j;
                                missDiv.appendChild(newp);
                            } else {

                                colorGraph = warnColor;

                                if (actType == "OK" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "OK") {
                                    warn.title = "Wrong type";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "Wrong") {
                                    warn.title = "Wrong cardinality and controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong type and cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong type and controlled vocabulary";
                                    warn.className = "tooltip";
                                }

                                row.insertCell(0).appendChild(warn);
                                recRate++;
                            }
                            row.insertCell(1).appendChild(property);
                            var tabType = document.createTextNode(stdType);
                            var tabGuide = document.createTextNode(stdGuide);
                            var tabVocab = document.createTextNode(stdVocab);
                            var tabCard = document.createTextNode(stdCard);
                            var tabDescr = document.createTextNode(stdDescr);
                            row.insertCell(2).appendChild(tabType);
                            var guideCell = row.insertCell(3);
                            guideCell.style.backgroundColor = recColor;
                            guideCell.appendChild(tabGuide);
                            row.insertCell(4).appendChild(tabVocab);
                            row.insertCell(5).appendChild(tabCard);
                            var descrCell = row.insertCell(6);
                            descrCell.className = "hide description";
                            descrCell.appendChild(tabDescr);

                        } else {

                            weightGraph = 0.05;

                            var row = optBody.insertRow(0);
                            optTot++;
                            if (actType == "OK" && actCard == "OK" && actVocab == "OK") {
                                colorGraph = okColor;

                                row.insertCell(0).appendChild(tick);
                                optRate++;
                            } else if (actType == "Not found" && actCard == "Not found" && actVocab == "Not found") {
                                colorGraph = noColor;

                                row.insertCell(0).appendChild(nope);
                            } else {

                                colorGraph = warnColor;

                                if (actType == "OK" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "OK") {
                                    warn.title = "Wrong type";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "Wrong") {
                                    warn.title = "Wrong cardinality and controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong type and cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong type and controlled vocabulary";
                                    warn.className = "tooltip";
                                }

                                row.insertCell(0).appendChild(warn);
                                optRate++;
                            }
                            row.insertCell(1).appendChild(property);
                            var tabType = document.createTextNode(stdType);
                            var tabGuide = document.createTextNode(stdGuide);
                            var tabVocab = document.createTextNode(stdVocab);
                            var tabCard = document.createTextNode(stdCard);
                            var tabDescr = document.createTextNode(stdDescr);
                            row.insertCell(2).appendChild(tabType);
                            var guideCell = row.insertCell(3);
                            guideCell.style.backgroundColor = optColor;
                            guideCell.appendChild(tabGuide);
                            row.insertCell(4).appendChild(tabVocab);
                            row.insertCell(5).appendChild(tabCard);
                            var descrCell = row.insertCell(6);
                            descrCell.className = "hide description";
                            descrCell.appendChild(tabDescr);
                        }
                        graphList.push({"label": j, "score": scoreGraph, "weight": weightGraph, "color": colorGraph});
                    }
                }

                for (var i in data["person_schema"]) {
                    for (var j in data["person_schema"][i]) {
                        var property = document.createElement("a");
                        property.setAttribute("href", "https://schema.org/" + j);
                        property.innerHTML = j;

                        var scoreGraph = 0,
                                weightGraph = 0.0,
                                colorGraph = "";
                        if (data2["organization_schema"][0][j] == undefined) {
                            scoreGraph = 0;
                        } else {
                            scoreGraph = data2["organization_schema"][0][j].length;
                        }

                        var stdType = data["person_schema"][i][j][0];
                        var stdDescr = data["person_schema"][i][j][1];
                        var stdCard = data["person_schema"][i][j][2];
                        var stdGuide = data["person_schema"][i][j][3];
                        var stdVocab;
                        if (data["person_schema"][i][j][4] == "Yes") {
                            stdVocab = data["person_schema"][i][j][4];
                        } else {
                            stdVocab = "No";
                        }
                        var actType = data["person_schema"][i][j][5];
                        var actCard = data["person_schema"][i][j][6];
                        var actVocab = data["person_schema"][i][j][7];

                        var tick = document.createElement("img");
                        tick.src = "../img/tick_green.png";
                        tick.alt = 1;
                        tick.style.width = "35%";
                        tick.style.display = "block";
                        tick.style.marginLeft = "auto";
                        tick.style.marginRight = "auto";
                        var nope = document.createElement("img");
                        nope.src = "../img/cross-512.png";
                        nope.alt = 3;
                        nope.style.width = "30%";
                        nope.style.display = "block";
                        nope.style.marginLeft = "auto";
                        nope.style.marginRight = "auto";
                        var warn = document.createElement("img");
                        warn.src = "../img/warning.png";
                        warn.alt = 2;
                        warn.style.width = "35%";
                        warn.style.display = "block";
                        warn.style.marginLeft = "auto";
                        warn.style.marginRight = "auto";

                        if (stdGuide == "Minimum") {

                            weightGraph = 0.6;

                            var row = minBody.insertRow(0);
                            minTot++;
                            if (actType == "OK" && actCard == "OK" && actVocab == "OK") {
                                colorGraph = okColor;

                                row.insertCell(0).appendChild(tick);
                                minRate++;
                            } else if (actType == "Not found" && actCard == "Not found" && actVocab == "Not found") {
                                colorGraph = noColor;

                                row.insertCell(0).appendChild(nope);
                                var missDiv = document.getElementById("missingMin");
                                var newp = document.createElement("p");
                                newp.innerHTML = "Missing minimum property " + j;
                                missDiv.appendChild(newp);
                            } else {

                                colorGraph = warnColor;

                                if (actType == "OK" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "OK") {
                                    warn.title = "Wrong type";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "Wrong") {
                                    warn.title = "Wrong cardinality and controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong type and cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong type and controlled vocabulary";
                                    warn.className = "tooltip";
                                }

                                row.insertCell(0).appendChild(warn);
                                minRate++;
                            }
                            row.insertCell(1).appendChild(property);
                            var tabType = document.createTextNode(stdType);
                            var tabGuide = document.createTextNode(stdGuide);
                            var tabVocab = document.createTextNode(stdVocab);
                            var tabCard = document.createTextNode(stdCard);
                            var tabDescr = document.createTextNode(stdDescr);
                            row.insertCell(2).appendChild(tabType);
                            var guideCell = row.insertCell(3);
                            guideCell.style.backgroundColor = minColor;
                            guideCell.appendChild(tabGuide);
                            row.insertCell(4).appendChild(tabVocab);
                            row.insertCell(5).appendChild(tabCard);
                            var descrCell = row.insertCell(6);
                            descrCell.className = "hide description";
                            descrCell.appendChild(tabDescr);

                        } else if (stdGuide == "Recommended") {

                            weightGraph = 0.35;

                            var row = minBody.insertRow(0);
                            recTot++;
                            if (actType == "OK" && actCard == "OK" && actVocab == "OK") {
                                colorGraph = okColor;

                                row.insertCell(0).appendChild(tick);
                                recRate++;
                            } else if (actType == "Not found" && actCard == "Not found" && actVocab == "Not found") {
                                colorGraph = noColor;

                                row.insertCell(0).appendChild(nope);
                                var missDiv = document.getElementById("missingRec");
                                var newp = document.createElement("p");
                                newp.innerHTML = "Missing recommended property " + j;
                                missDiv.appendChild(newp);
                            } else {

                                colorGraph = warnColor;

                                if (actType == "OK" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "OK") {
                                    warn.title = "Wrong type";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "Wrong") {
                                    warn.title = "Wrong cardinality and controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong type and cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong type and controlled vocabulary";
                                    warn.className = "tooltip";
                                }

                                row.insertCell(0).appendChild(warn);
                                recRate++;
                            }
                            row.insertCell(1).appendChild(property);
                            var tabType = document.createTextNode(stdType);
                            var tabGuide = document.createTextNode(stdGuide);
                            var tabVocab = document.createTextNode(stdVocab);
                            var tabCard = document.createTextNode(stdCard);
                            var tabDescr = document.createTextNode(stdDescr);
                            row.insertCell(2).appendChild(tabType);
                            var guideCell = row.insertCell(3);
                            guideCell.style.backgroundColor = recColor;
                            guideCell.appendChild(tabGuide);
                            row.insertCell(4).appendChild(tabVocab);
                            row.insertCell(5).appendChild(tabCard);
                            var descrCell = row.insertCell(6);
                            descrCell.className = "hide description";
                            descrCell.appendChild(tabDescr);

                        } else {

                            weightGraph = 0.05;

                            var row = optBody.insertRow(0);
                            optTot++;
                            if (actType == "OK" && actCard == "OK" && actVocab == "OK") {
                                colorGraph = okColor;

                                row.insertCell(0).appendChild(tick);
                                optRate++;
                            } else if (actType == "Not found" && actCard == "Not found" && actVocab == "Not found") {
                                colorGraph = noColor;

                                row.insertCell(0).appendChild(nope);
                            } else {

                                colorGraph = warnColor;

                                if (actType == "OK" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "OK") {
                                    warn.title = "Wrong type";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "Wrong") {
                                    warn.title = "Wrong cardinality and controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong type and cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong type and controlled vocabulary";
                                    warn.className = "tooltip";
                                }

                                row.insertCell(0).appendChild(warn);
                                optRate++;
                            }
                            row.insertCell(1).appendChild(property);
                            var tabType = document.createTextNode(stdType);
                            var tabGuide = document.createTextNode(stdGuide);
                            var tabVocab = document.createTextNode(stdVocab);
                            var tabCard = document.createTextNode(stdCard);
                            var tabDescr = document.createTextNode(stdDescr);
                            row.insertCell(2).appendChild(tabType);
                            var guideCell = row.insertCell(3);
                            guideCell.style.backgroundColor = optColor;
                            guideCell.appendChild(tabGuide);
                            row.insertCell(4).appendChild(tabVocab);
                            row.insertCell(5).appendChild(tabCard);
                            var descrCell = row.insertCell(6);
                            descrCell.className = "hide description";
                            descrCell.appendChild(tabDescr);
                        }
                        graphList.push({"label": j, "score": scoreGraph, "weight": weightGraph, "color": colorGraph});
                    }
                }
            } else if (type == "Training") {
                for (var i in data["training_bioschemas"]) {
                    for (var j in data["training_bioschemas"][i]) {
                        var property = document.createTextNode(j);

                        var scoreGraph = 0,
                                weightGraph = 0.0,
                                colorGraph = "";
                        if (data2["organization_schema"][0][j] == undefined) {
                            scoreGraph = 0;
                        } else {
                            scoreGraph = data2["organization_schema"][0][j].length;
                        }

                        var stdType = data["training_bioschemas"][i][j][0];
                        var stdDescr = data["training_bioschemas"][i][j][1];
                        var stdCard = data["training_bioschemas"][i][j][2];
                        var stdGuide = data["training_bioschemas"][i][j][3];
                        var stdVocab;
                        if (data["training_bioschemas"][i][j][4] == "Yes") {
                            stdVocab = data["training_bioschemas"][i][j][4];
                        } else {
                            stdVocab = "No";
                        }
                        var actType = data["training_bioschemas"][i][j][5];
                        var actCard = data["training_bioschemas"][i][j][6];
                        var actVocab = data["training_bioschemas"][i][j][7];

                        var tick = document.createElement("img");
                        tick.src = "../img/tick_green.png";
                        tick.alt = 1;
                        tick.style.width = "35%";
                        tick.style.display = "block";
                        tick.style.marginLeft = "auto";
                        tick.style.marginRight = "auto";
                        var nope = document.createElement("img");
                        nope.src = "../img/cross-512.png";
                        nope.alt = 3;
                        nope.style.width = "30%";
                        nope.style.display = "block";
                        nope.style.marginLeft = "auto";
                        nope.style.marginRight = "auto";
                        var warn = document.createElement("img");
                        warn.src = "../img/warning.png";
                        warn.alt = 2;
                        warn.style.width = "35%";
                        warn.style.display = "block";
                        warn.style.marginLeft = "auto";
                        warn.style.marginRight = "auto";

                        if (stdGuide == "Minimum") {

                            weightGraph = 0.6;

                            var row = minBody.insertRow(0);
                            minTot++;
                            if (actType == "OK" && actCard == "OK" && actVocab == "OK") {
                                colorGraph = okColor;

                                row.insertCell(0).appendChild(tick);
                                minRate++;
                            } else if (actType == "Not found" && actCard == "Not found" && actVocab == "Not found") {
                                colorGraph = noColor;

                                row.insertCell(0).appendChild(nope);
                                var missDiv = document.getElementById("missingMin");
                                var newp = document.createElement("p");
                                newp.innerHTML = "Missing minimum property " + j;
                                missDiv.appendChild(newp);
                            } else {

                                colorGraph = warnColor;

                                if (actType == "OK" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "OK") {
                                    warn.title = "Wrong type";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "Wrong") {
                                    warn.title = "Wrong cardinality and controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong type and cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong type and controlled vocabulary";
                                    warn.className = "tooltip";
                                }

                                row.insertCell(0).appendChild(warn);
                                minRate++;
                            }
                            row.insertCell(1).appendChild(property);
                            var tabType = document.createTextNode(stdType);
                            var tabGuide = document.createTextNode(stdGuide);
                            var tabVocab = document.createTextNode(stdVocab);
                            var tabCard = document.createTextNode(stdCard);
                            var tabDescr = document.createTextNode(stdDescr);
                            row.insertCell(2).appendChild(tabType);
                            var guideCell = row.insertCell(3);
                            guideCell.style.backgroundColor = minColor;
                            guideCell.appendChild(tabGuide);
                            row.insertCell(4).appendChild(tabVocab);
                            row.insertCell(5).appendChild(tabCard);
                            var descrCell = row.insertCell(6);
                            descrCell.className = "hide description";
                            descrCell.appendChild(tabDescr);

                        } else if (stdGuide == "Recommended") {

                            weightGraph = 0.35;

                            var row = minBody.insertRow(0);
                            recTot++;
                            if (actType == "OK" && actCard == "OK" && actVocab == "OK") {
                                colorGraph = okColor;

                                row.insertCell(0).appendChild(tick);
                                recRate++;
                            } else if (actType == "Not found" && actCard == "Not found" && actVocab == "Not found") {
                                colorGraph = noColor;

                                row.insertCell(0).appendChild(nope);
                                var missDiv = document.getElementById("missingRec");
                                var newp = document.createElement("p");
                                newp.innerHTML = "Missing recommended property " + j;
                                missDiv.appendChild(newp);
                            } else {

                                colorGraph = warnColor;

                                if (actType == "OK" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "OK") {
                                    warn.title = "Wrong type";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "Wrong") {
                                    warn.title = "Wrong cardinality and controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong type and cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong type and controlled vocabulary";
                                    warn.className = "tooltip";
                                }

                                row.insertCell(0).appendChild(warn);
                                recRate++;
                            }
                            row.insertCell(1).appendChild(property);
                            var tabType = document.createTextNode(stdType);
                            var tabGuide = document.createTextNode(stdGuide);
                            var tabVocab = document.createTextNode(stdVocab);
                            var tabCard = document.createTextNode(stdCard);
                            var tabDescr = document.createTextNode(stdDescr);
                            row.insertCell(2).appendChild(tabType);
                            var guideCell = row.insertCell(3);
                            guideCell.style.backgroundColor = recColor;
                            guideCell.appendChild(tabGuide);
                            row.insertCell(4).appendChild(tabVocab);
                            row.insertCell(5).appendChild(tabCard);
                            var descrCell = row.insertCell(6);
                            descrCell.className = "hide description";
                            descrCell.appendChild(tabDescr);

                        } else {

                            weightGraph = 0.05;

                            var row = optBody.insertRow(0);
                            optTot++;
                            if (actType == "OK" && actCard == "OK" && actVocab == "OK") {
                                colorGraph = okColor;

                                row.insertCell(0).appendChild(tick);
                                optRate++;
                            } else if (actType == "Not found" && actCard == "Not found" && actVocab == "Not found") {
                                colorGraph = noColor;

                                row.insertCell(0).appendChild(nope);
                            } else {

                                colorGraph = warnColor;

                                if (actType == "OK" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "OK") {
                                    warn.title = "Wrong type";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "Wrong") {
                                    warn.title = "Wrong cardinality and controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong type and cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong type and controlled vocabulary";
                                    warn.className = "tooltip";
                                }

                                row.insertCell(0).appendChild(warn);
                                optRate++;
                            }
                            row.insertCell(1).appendChild(property);
                            var tabType = document.createTextNode(stdType);
                            var tabGuide = document.createTextNode(stdGuide);
                            var tabVocab = document.createTextNode(stdVocab);
                            var tabCard = document.createTextNode(stdCard);
                            var tabDescr = document.createTextNode(stdDescr);
                            row.insertCell(2).appendChild(tabType);
                            var guideCell = row.insertCell(3);
                            guideCell.style.backgroundColor = optColor;
                            guideCell.appendChild(tabGuide);
                            row.insertCell(4).appendChild(tabVocab);
                            row.insertCell(5).appendChild(tabCard);
                            var descrCell = row.insertCell(6);
                            descrCell.className = "hide description";
                            descrCell.appendChild(tabDescr);
                        }
                        graphList.push({"label": j, "score": scoreGraph, "weight": weightGraph, "color": colorGraph});
                    }
                }

                for (var i in data["training_schema"]) {
                    for (var j in data["training_schema"][i]) {
                        var property = document.createElement("a");
                        property.setAttribute("href", "https://schema.org/" + j);
                        property.innerHTML = j;

                        var scoreGraph = 0,
                                weightGraph = 0.0,
                                colorGraph = "";
                        if (data2["organization_schema"][0][j] == undefined) {
                            scoreGraph = 0;
                        } else {
                            scoreGraph = data2["organization_schema"][0][j].length;
                        }

                        var stdType = data["training_schema"][i][j][0];
                        var stdDescr = data["training_schema"][i][j][1];
                        var stdCard = data["training_schema"][i][j][2];
                        var stdGuide = data["training_schema"][i][j][3];
                        var stdVocab;
                        if (data["training_schema"][i][j][4] == "Yes") {
                            stdVocab = data["training_schema"][i][j][4];
                        } else {
                            stdVocab = "No";
                        }
                        var actType = data["training_schema"][i][j][5];
                        var actCard = data["training_schema"][i][j][6];
                        var actVocab = data["training_schema"][i][j][7];

                        var tick = document.createElement("img");
                        tick.src = "../img/tick_green.png";
                        tick.alt = 1;
                        tick.style.width = "35%";
                        tick.style.display = "block";
                        tick.style.marginLeft = "auto";
                        tick.style.marginRight = "auto";
                        var nope = document.createElement("img");
                        nope.src = "../img/cross-512.png";
                        nope.alt = 3;
                        nope.style.width = "30%";
                        nope.style.display = "block";
                        nope.style.marginLeft = "auto";
                        nope.style.marginRight = "auto";
                        var warn = document.createElement("img");
                        warn.src = "../img/warning.png";
                        warn.alt = 2;
                        warn.style.width = "35%";
                        warn.style.display = "block";
                        warn.style.marginLeft = "auto";
                        warn.style.marginRight = "auto";

                        if (stdGuide == "Minimum") {

                            weightGraph = 0.6;

                            var row = minBody.insertRow(0);
                            minTot++;
                            if (actType == "OK" && actCard == "OK" && actVocab == "OK") {
                                colorGraph = okColor;

                                row.insertCell(0).appendChild(tick);
                                minRate++;
                            } else if (actType == "Not found" && actCard == "Not found" && actVocab == "Not found") {
                                colorGraph = noColor;

                                row.insertCell(0).appendChild(nope);
                                var missDiv = document.getElementById("missingMin");
                                var newp = document.createElement("p");
                                newp.innerHTML = "Missing minimum property " + j;
                                missDiv.appendChild(newp);
                            } else {

                                colorGraph = warnColor;

                                if (actType == "OK" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "OK") {
                                    warn.title = "Wrong type";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "Wrong") {
                                    warn.title = "Wrong cardinality and controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong type and cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong type and controlled vocabulary";
                                    warn.className = "tooltip";
                                }

                                row.insertCell(0).appendChild(warn);
                                minRate++;
                            }
                            row.insertCell(1).appendChild(property);
                            var tabType = document.createTextNode(stdType);
                            var tabGuide = document.createTextNode(stdGuide);
                            var tabVocab = document.createTextNode(stdVocab);
                            var tabCard = document.createTextNode(stdCard);
                            var tabDescr = document.createTextNode(stdDescr);
                            row.insertCell(2).appendChild(tabType);
                            var guideCell = row.insertCell(3);
                            guideCell.style.backgroundColor = minColor;
                            guideCell.appendChild(tabGuide);
                            row.insertCell(4).appendChild(tabVocab);
                            row.insertCell(5).appendChild(tabCard);
                            var descrCell = row.insertCell(6);
                            descrCell.className = "hide description";
                            descrCell.appendChild(tabDescr);

                        } else if (stdGuide == "Recommended") {

                            weightGraph = 0.35;

                            var row = minBody.insertRow(0);
                            recTot++;
                            if (actType == "OK" && actCard == "OK" && actVocab == "OK") {
                                colorGraph = okColor;

                                row.insertCell(0).appendChild(tick);
                                recRate++;
                            } else if (actType == "Not found" && actCard == "Not found" && actVocab == "Not found") {
                                colorGraph = noColor;

                                row.insertCell(0).appendChild(nope);
                                var missDiv = document.getElementById("missingRec");
                                var newp = document.createElement("p");
                                newp.innerHTML = "Missing recommended property " + j;
                                missDiv.appendChild(newp);
                            } else {

                                colorGraph = warnColor;

                                if (actType == "OK" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "OK") {
                                    warn.title = "Wrong type";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "Wrong") {
                                    warn.title = "Wrong cardinality and controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong type and cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong type and controlled vocabulary";
                                    warn.className = "tooltip";
                                }

                                row.insertCell(0).appendChild(warn);
                                recRate++;
                            }
                            row.insertCell(1).appendChild(property);
                            var tabType = document.createTextNode(stdType);
                            var tabGuide = document.createTextNode(stdGuide);
                            var tabVocab = document.createTextNode(stdVocab);
                            var tabCard = document.createTextNode(stdCard);
                            var tabDescr = document.createTextNode(stdDescr);
                            row.insertCell(2).appendChild(tabType);
                            var guideCell = row.insertCell(3);
                            guideCell.style.backgroundColor = recColor;
                            guideCell.appendChild(tabGuide);
                            row.insertCell(4).appendChild(tabVocab);
                            row.insertCell(5).appendChild(tabCard);
                            var descrCell = row.insertCell(6);
                            descrCell.className = "hide description";
                            descrCell.appendChild(tabDescr);

                        } else {

                            weightGraph = 0.05;

                            var row = optBody.insertRow(0);
                            optTot++;
                            if (actType == "OK" && actCard == "OK" && actVocab == "OK") {
                                colorGraph = okColor;

                                row.insertCell(0).appendChild(tick);
                                optRate++;
                            } else if (actType == "Not found" && actCard == "Not found" && actVocab == "Not found") {
                                colorGraph = noColor;

                                row.insertCell(0).appendChild(nope);
                            } else {

                                colorGraph = warnColor;

                                if (actType == "OK" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "OK") {
                                    warn.title = "Wrong type";
                                    warn.className = "tooltip";
                                } else if (actType == "OK" && actCard == "Wrong" && actVocab == "Wrong") {
                                    warn.title = "Wrong cardinality and controlled vocabulary";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "Wrong" && actVocab == "OK") {
                                    warn.title = "Wrong type and cardinality";
                                    warn.className = "tooltip";
                                } else if (actType == "Wrong" && actCard == "OK" && actVocab == "Wrong") {
                                    warn.title = "Wrong type and controlled vocabulary";
                                    warn.className = "tooltip";
                                }

                                row.insertCell(0).appendChild(warn);
                                optRate++;
                            }
                            row.insertCell(1).appendChild(property);
                            var tabType = document.createTextNode(stdType);
                            var tabGuide = document.createTextNode(stdGuide);
                            var tabVocab = document.createTextNode(stdVocab);
                            var tabCard = document.createTextNode(stdCard);
                            var tabDescr = document.createTextNode(stdDescr);
                            row.insertCell(2).appendChild(tabType);
                            var guideCell = row.insertCell(3);
                            guideCell.style.backgroundColor = optColor;
                            guideCell.appendChild(tabGuide);
                            row.insertCell(4).appendChild(tabVocab);
                            row.insertCell(5).appendChild(tabCard);
                            var descrCell = row.insertCell(6);
                            descrCell.className = "hide description";
                            descrCell.appendChild(tabDescr);
                        }
                        graphList.push({"label": j, "score": scoreGraph, "weight": weightGraph, "color": colorGraph});
                    }
                }
            }

            var minRating = (minRate / minTot) * 100;
            var recRating = (recRate / recTot) * 100;
            var optRating = (optRate / optTot) * 100;

            var minStars = (minRating * 60) / 100;
            var recStars = (recRating * 35) / 100;
            var optStars = (optRating * 5) / 100;

            var totRating = minStars + recStars + optStars;

            var rateTarget = document.getElementById("rating");
            rateTarget.innerHTML = "This website's compliance rating is " + Math.round(totRating) + "%";

            var rateDiv = document.getElementById("ratingDiv");
            var rateImg = document.createElement("img");
            if (totRating <= 20) {
                rateImg.src = "../img/1star.png";
            } else if (totRating > 20 && totRating <= 40) {
                rateImg.src = "../img/2stars.png";
            } else if (totRating > 40 && totRating <= 60) {
                rateImg.src = "../img/3stars.png";
            } else if (totRating > 60 && totRating <= 80) {
                rateImg.src = "../img/4stars.png";
            } else {
                rateImg.src = "../img/5stars.png";
            }

            rateImg.style.width = "20%";
            rateDiv.appendChild(rateImg);

            setTimeout(function () {

                var width = 500,
                        height = 500,
                        radius = Math.min(width, height) / 2,
                        innerRadius = 0.3 * radius;

                var pie = d3.layout.pie()
                        .sort(null)
                        .value(function(d) { return d.width; });

                var tip = d3.tip()
                        .attr("class", "d3-tip")
                        .offset([0, 0])
                        .html(function(d) {
                            return d.data.label + ": <span style='color: orangered'>" + d.data.score + "</span><br>" + (d.data.weight == 0.5 ? "Minimum Property" : (d.data.weight == 0.3 ? "Recommended Property" : "Optional Property"));
                        });

                var arc = d3.svg.arc()
                        .innerRadius(innerRadius)
                        .outerRadius(function (d) {
                            return (radius - innerRadius) * (d.data.score != 0 ? (d.data.score / d.data.mean) : 0.05) + innerRadius;
                        });

                var maxScore = Math.max(minRate, recRate, optRate);

                var outlineArc = d3.svg.arc()
                        .innerRadius(innerRadius)
                        .outerRadius(radius);

                var svg = d3.select("body").append("svg")
                        .attr("width", width)
                        .attr("height", height)
                        .append("g")
                        .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

                svg.call(tip);

                d3.csv(siteName + '/chartData_' + type + '.csv', function(error, data) {

                    data.forEach(function(d) {
                        //d.id     =  d.id;
                        d.order  = +d.order;
                        d.color  =  d.color;
                        d.weight = +d.weight;
                        d.score  = +d.score;
                        d.width  = +d.weight;
                        d.label  =  d.label;
                        d.mean   = +d.mean;
                    });

                    var path = svg.selectAll(".solidArc")
                            .data(pie(data))
                            .enter().append("path")
                            .attr("fill", function(d) { return d.data.color; })
                            .attr("class", "solidArc")
                            .attr("stroke", "gray")
                            .attr("d", arc)
                            .on('mouseover', tip.show)
                            .on('mouseout', tip.hide);

                    var outerPath = svg.selectAll(".outlineArc")
                            .data(pie(data))
                            .enter().append("path")
                            .attr("fill", "none")
                            .attr("stroke", "gray")
                            .attr("class", "outlineArc")
                            .attr("d", outlineArc);

                    svg.append("svg:text")
                            .attr("class", "aster-score")
                            .attr("dy", ".35em")
                            .attr("text-anchor", "middle") // text-align: right
                            .text(Math.round(totRating) + "%");

                });
            }, 1000);


        });

    });

    var recButt = d3.select("#recommButton");
    recButt.on("click", function () {
        if (document.getElementById("missingRec").classList.contains("hide")) {
            document.getElementById("missingRec").classList.remove("hide");
        } else {
            document.getElementById("missingRec").classList.add("hide");
        }
    });

    var optButt = d3.select("#optButton");
    optButt.on("click", function () {
        if (document.getElementById("optTable").classList.contains("hide")) {
            document.getElementById("optTable").classList.remove("hide");
        } else {
            document.getElementById("optTable").classList.add("hide");
        }
    });

    var descrButt = d3.select("#descrButton");
    descrButt.on("click", function () {
        for (var i in document.getElementsByClassName("description")) {
            if (document.getElementsByClassName("description")[i].classList.contains("hide")) {
                document.getElementsByClassName("description")[i].classList.remove("hide");
            } else {
                document.getElementsByClassName("description")[i].classList.add("hide");
            }
        }
    });

    setTimeout(function(){ $("#minTable").tablesorter({
        textExtraction:function (s) {
            if ($(s).find("img").length == 0) return $(s).text();
            return $(s).find("img").attr("alt");
        }
    }); }, 1000);

    setTimeout(function(){ $("#optTable").tablesorter({
        textExtraction:function (s) {
            if ($(s).find("img").length == 0) return $(s).text();
            return $(s).find("img").attr("alt");
        }
    }); }, 1000);

    setTimeout(function(){ $(".tooltip").tooltipster(); }, 1000);


</script>

</body>
</html>